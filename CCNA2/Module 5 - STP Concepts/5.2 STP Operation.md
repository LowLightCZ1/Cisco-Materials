- __Steps for a Loop-free Topology__
1. Elect the root bridge
2. Elect the root ports
3. Elect designated ports
4. Elect alternate (blocked) ports

- Switches use __BPDUs__ (Bridge Protocol Data Units) to  share information about themself and connections.
- Used to elect the root bridge, ports + designated ports, alternate ports 
- contains BPDU ID (BID) - info which switch sent which BPDU

___Parts of BPDU___
- __Bridge Priority__
	- Cisco default value - 32768
	- Range - 0 to 61440
- __Extended System ID__
	- decimal value to identify the VLAN
	- required 12-bit VLAN ID
- __MAC Address__
	- lower value - lower BID

## ___Elect the Root Bridge___
- STA designates one switch as a __Root Bridge__ - use as a reference point for all calculations
- After switch boots, it sends BPDU frames every 2 sec. 
	- contain Root ID
- Switch with lowest BID become root bridge

___Example:___
![[Screenshot 2025-12-15 134545.png]]
## ___Impact of Default BIDs___
- Possible for more switches to have same priority.
- When there are, switch with the lowest __MAC address__ be the root bridge
![[Screenshot 2025-12-15 134636.png]]

## ___Determine the Root Path Cost___
- Path Information (__internal root path cost__) - determine by the sum of all the individual ports
- Port cost is defined by:  speed, IEEE 802.1D (__short path cost__); IEEE 802.1w(__long path cost__)

## ___Elect the Root Ports___
- After determine root bridge, STA is used to select the __root port__.
- Every non-root switch will select one __root port__.
- Paths with the lowest cost become preferred, all other redundant paths are blocked
![[Screenshot 2025-12-15 184700.png]]

## ___Elect Designated Port___
- After select root port, switches select __designated ports__
- __Designated Port__ - has the best path to receive traffic leading to the root bridge

## ___Elect Alternate(Blocked) Port___
- If port is __root port__ or __designated port__ , it become an __alternate(backup) port__.

## ___Elect Root Port from Multiple Equal-Cost Paths___
- Switch determine a port using these criteria:

1. __Lowest Sender BID__
	- ![[Screenshot 2025-12-15 190423.png]]
	- 
2. __Lowest Sender port Priority__
	- ![[Screenshot 2025-12-15 190643.png]]
3. __Lowest Sender port ID__
	- ![[Screenshot 2025-12-15 190721.png]]

## ___STP Timers and Port States___
- __Hello Timer__ - interval between BPDUs, default 2 sec. modify 1 - 10 sec.
- __Forward Delay Timer__ - time for _listening and learning_ state, default 15 sec. modify 4 - 30 sec.
- __Max Age Time__ - max. length of time that switch before attempting change STP topology default 20 sec. modify 6 - 40 sec.
![[Screenshot 2025-12-15 191455.png]]
![[Screenshot 2025-12-15 191518.png]]

## ___Per-VLAN Spanning Tree___
- PVST
- Root bridge elected for each ST instance